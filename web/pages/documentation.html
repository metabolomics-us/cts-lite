<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CTS-Lite</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="icon" type="image/jpg" href="../assets/cts-lite.jpg"/>
</head>
<body>
    <div class="banner-container">
        <div class="navbar">
            <a class="navbar-item" href="">Documentation</a>

            <a class="navbar-item" href="../index.html">
            <header>
                <h1>CTS-Lite</h1>
                <h3>UC Davis Fiehn Lab</h3>
            </header>
            </a>

            <a class="navbar-item" href="https://github.com/metabolomics-us/cts-lite/issues" title="Report issues or request features" target="_blank">Feedback</a>
        </div>
        <div>
            <h2 style="text-align: center; margin-top: -2rem">Documentation</h2>

            <p>
                CTS-Lite is a lightweight chemical translation service based off of the Fiehn Lab's original [CTS](https://cts.fiehnlab.ucdavis.edu/). It allows users to match InChIs, InChIKeys, and SMILES against the PubChemLite database.
            </p>

            <p>
                <h3>Using CTS-Lite</h3>
                To use CTS-Lite, simply enter InChIs, InChIKeys, and SMILES into the input box on the main page. You can separate entries using spaces, tabs, or newlines. When you click 'Match', the results will be displayed in the output section. Results can be downloaded in JSON and CSV formats using the buttons provided.
            </p>

            <p>
                <!-- TODO: Change URL to final DNS -->
                <h3>REST API</h3>
                To use the REST API, use the following format: `curl localhost:8080/match?q="your_query"`
                <br>
                You can add `--header "Accept: text/csv"` to the end of your curl request to get results in CSV format.
                <br>
                Please note that query lengths may be limited by your browser, meaning <i>very</i> large queries may throw an error. It is obvious when you see it, the result box will print something like `Error: Window.fetch: ...`. For perspective, I was able to successfully run queries with 500,000+ characters in Firefox.
            </p>

            <p>
                <h3>Query Types</h3>
                Query types are parsed using the following logic:
                InChIKeys must be of the exact format: 14-10-1, all capital letters
                InChIs must start with "InChI=" (case-sensitive)
                SMILES must start with one of the following characters: C, B, [, O, F, N, S, P, I (case-sensitive)

                Malformed queries are identified as follows:
                InChIKeys that match the following regex pattern: `^[a-zA-Z]{12,16}-[a-zA-Z]{9,11}-[a-zA-Z]{0,2}$`
                InChIs that start with "InChI=" but with improper capitalization
                Anything else is labeled as `Unidentified`
            </p>

            <p>
                <h3>Match Levels</h3>
                InChIKey queries can match on a first-block basis, giving the `first-block` match_level value. SMILES and InChI queries can only be exact matches.
            </p>

        </div>
    </div>
</body>
</html>